doctype html
html(lang='en')
  head
    title KIWI Booking System
    include includes/css_link.pug
 
    //datepicker and timepicker
    //link(rel='stylesheet', href='//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css')
    //link(rel='stylesheet', href='/resources/demos/style.css')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js')
    script(src='https://code.jquery.com/jquery-1.12.4.js')
    //script(src='https://code.jquery.com/ui/1.12.1/jquery-ui.js')
    script.
      $( function() {
      $( "#datepicker" ).datepicker();  
      } );
    script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js')
    script(src='js/jquery.timepicker.js')
    script.
      $('#demo1').timepicker({
      timeFormat: 'h:mm:ss p'
      } );

    script(type='text/javascript', src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
    script(type='text/javascript', src='https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.js')
    link(rel='stylesheet', type='text/css', href='https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.css')
    script(type='text/javascript', src='https://jonthornton.github.io/jquery-timepicker/lib/bootstrap-datepicker.js')
    link(rel='stylesheet', type='text/css', href='https://jonthornton.github.io/jquery-timepicker/lib/bootstrap-datepicker.css')

    script(type='text/javascript', src='bower_components/jquery/jquery.min.js')
    script(type='text/javascript', src='bower_components/moment/min/moment.min.js')
    script(type='text/javascript', src='bower_components/bootstrap/dist/js/bootstrap.min.js')
    script(type='text/javascript', src='bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js')
    script(type='text/javascript', src='bower_components/eonasdan-bootstrap-datetimepicker/src/js/bootstrap-datetimepicker.js')
    link(rel='stylesheet', href='bower_components/bootstrap/dist/css/bootstrap.min.css')
    link(rel='stylesheet', href='bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css')   

    //calendar
    //using fullcalendar to display bookings/event from google calendar 
    link(href='fullcalendar/core/main.css', rel='stylesheet')
    link(href='fullcalendar/daygrid/main.css', rel='stylesheet')
    script(src='fullcalendar/core/main.js')
    script(src='fullcalendar/daygrid/main.js')

    script(src='fullcalendar/list/main.js')
    script(src='fullcalendar/moment/main.js')
    script(src='fullcalendar/bootstrap/main.js')
    script(src='fullcalendar/timegrid/main.js')
    script(src='fullcalendar/interaction/main.js')
    script(src='fullcalendar/rrule/main.js')
    script(src='fullcalendar/luxon/main.js')
    
    script(src='fullcalendar/google-calendar/main.js')
    //script(src='fullcalendar/lib/jquery.min.js') // file not found
    //script(src='fullcalendar/lib/moment.min.js') // file not found
    script.
      document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
      plugins: [ 'dayGrid', 'list', 'googleCalendar' ],
      header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,dayGridMonth,listYear'
      },
      //displayEventTime: false, // don't show the time column in list view
      googleCalendarApiKey: 'AIzaSyC_mWruJZ1BBBYtqFOd4isekFRKOOAKChM',
      eventSources: [
        {
          googleCalendarId: '1b6t3ab0q9f4fdf5jf7lou0n2k@group.calendar.google.com',
          color: 'pink'
        },
        {
          googleCalendarId: 'm177m8gpcul33cittkr9orgn2c@group.calendar.google.com',
          color: 'blue'
        },
        {
          googleCalendarId: 'h64gs6eub1o4sfkudpopmeuvqk@group.calendar.google.com',
          color: 'purple'
        },
        {
          googleCalendarId: 'r5ova3ln860o8v08c6pb826jvs@group.calendar.google.com',
          color: 'green'
        },
        {
          googleCalendarId: '43h56k493csaghvtu61ukhja28@group.calendar.google.com',
          color: 'orange'
        }
      ],
      //events: 'en.usa#holiday@group.v.calendar.google.com',
      eventClick: function(arg) {
      // opens events in a popup window
      window.open(arg.event.url, '_blank', 'width=700,height=600');
      // prevents current tab from navigating
      arg.jsEvent.preventDefault();
      }
      });
      calendar.render();
      });


  body.goto-here
    include includes/nav.pug
    // TITLE 
    .hero-wrap.hero-bread(style="background-image: url('images/bg_6.jpg');")
      .container
        .row.no-gutters.slider-text.align-items-center.justify-content-center
          .col-md-9.ftco-animate.text-center
            p.breadcrumbs
              span.mr-2
                a(href='/') Home
              span Booking
            h1.mb-0.bread Booking 
            h1.mb-0.bread - Facilities Reservation -
    // CONTENT
    .container
      .row
        .col-sm-6
          .form-group
            #datetimepicker1.input-group.date
              input.form-control(type='text')
              span.input-group-addon
                span.glyphicon.glyphicon-calendar
        script(type='text/javascript').
          $(function () {
          $('#datetimepicker1').datetimepicker();
          });

    section.ftco-section.contact-section.bg-light
      // CALENDAR
      .container    
        a(style ='color: black ')
         #calendar
      <br>
      .container
        .col-md-5
          .form-group
            #datetimepicker6.input-group.date
              input.form-control(type='text')
              span.input-group-addon
                span.glyphicon.glyphicon-calendar
        .col-md-5
          .form-group
            #datetimepicker7.input-group.date
              input.form-control(type='text')
              span.input-group-addon
                span.glyphicon.glyphicon-calendar
      script(type='text/javascript').
        $(function () {
        $('#datetimepicker6').datetimepicker();
        $('#datetimepicker7').datetimepicker({
        useCurrent: false //Important! See issue #1075
        });
        $("#datetimepicker6").on("dp.change", function (e) {
        $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
        });
        $("#datetimepicker7").on("dp.change", function (e) {
        $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
        });
        });
      // BOOKING FORM
      .container
        .row.justify-content-center
          //action='/feedback-res-sent', , method='post', enctype='multipart/form-data'
          form#myForm.bg-white.p-5.contact-form(name='submit-to-google-sheet', action='/feedback-res-sent', method='post', enctype='multipart/form-data')
            .row.align-items-end
              .col-md-12
                .form-group
                  label(for='name') Name of CCA
                  input.form-control(type='text', name='cca_name', required='required')
              .col-md-12
                .form-group
                  label(for='purpose') Purpose
                  input.form-control(type='text', name='purpose', required='required')
              .col-md-6
                .form-group
                  label(for='venue') Venue
                  select.form-control(type='text', name='venue', required='required')
                    option(value='Dining Hall 01') Dining Hall 01
                    option(value='Comm Hall 02') Comm Hall 02
                    option(value='Study Room 03') Study Room 03
                    option(value='Marketing Room 04') Marketing Room 04
                    option(value='Incub Room 05') Incub Room 05
              .col-md-6
                .form-group
                  label(for='email') Email
                  input.form-control(type='email', name='email', required='required')
                  //input#datepicker.form-control(type='text', name='date', required='required')
              .col-md-6
                .form-group
                  label(for='starttime') Start Time
                  input#demo1.form-control(type='datetime-local', name='starttime', required='required')
              .col-md-6
                .form-group
                  label(for='endtime') End Time
                  input#demo2.form-control(type='datetime-local', name='endtime', required='required')
              .form-group
                input.btn.btn-primary.py-3.px-5(type='submit', value='Book Now!')
 

    //to submit html form content to google sheet (url below linked to Google Script webApp)
    script.
      const scriptURL = 'https://script.google.com/macros/s/AKfycbwoDCDD5Ju9lLDGGK_0YSrV5EACOdDv9VpJg7HZTzJDSfgSUSw/exec'
      const form = document.forms['submit-to-google-sheet']
      var demo1 = document.getElementById("demo1").value;
      var demo2 = document.getElementById("demo2").value;
      form.addEventListener('submit', e => {
      e.preventDefault()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
      .then(response => console.log('Success!', response))
      .catch(error => console.error('Error!', error.message))
      })
                
    
    // FOOTER
    include includes/footer.pug